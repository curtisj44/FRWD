window.Swipe=function(a,b){a&&(this.container=a,this.element=this.container.children[0],this.browser={touch:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}(),transitions:function(){var a=document.createElement("swipe"),b=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var c in b)if(void 0!==a.style[b[c]])return!0;return!1}()},b=b||{},this.index=b.startSlide||0,this.speed=b.speed||300,this.callback=b.callback||function(){},this.transitionEnd=b.transitionEnd||function(){},this.delay=b.auto||0,this.cont=!!b.continuous,this.disableScroll=!!b.disableScroll,this.index=parseInt(this.index,10),this.setup(),this.begin(),this.element.addEventListener?(this.browser.touch&&(this.element.addEventListener("touchstart",this,!1),this.element.addEventListener("touchmove",this,!1),this.element.addEventListener("touchend",this,!1)),this.browser.transitions&&(this.element.addEventListener("webkitTransitionEnd",this,!1),this.element.addEventListener("msTransitionEnd",this,!1),this.element.addEventListener("oTransitionEnd",this,!1),this.element.addEventListener("transitionend",this,!1)),window.addEventListener("resize",this,!1)):window.onresize=this.setup)},Swipe.prototype={setup:function(){if(this.slides=this.element.children,this.length=this.slides.length,this.cache=new Array(this.length),!(this.length<2)&&(this.width=this.container.getBoundingClientRect().width||this.container.offsetWidth,this.width)){var a=[[],[],[]];this.element.style.width=this.slides.length*this.width+"px";for(var b=this.length-1;b>-1;b--){var c=this.slides[b];c.style.width=this.width+"px",c.setAttribute("data-index",b),this.browser.transitions&&(c.style.left=b*-this.width+"px"),a[this.index>b?0:this.index<b?2:1].push(b)}this.browser.transitions&&(this._slide(a[0],-this.width,0,1),this._slide(a[1],0,0,1),this._slide(a[2],this.width,0,1)),this.container.style.visibility="visible"}},kill:function(){this.delay=0,clearTimeout(this.interval);for(var a=[],b=this.slides.length-1;b>=0;b--)this.slides[b].style.width="",a.push(b);this._slide(a,0,0,1);var c=this.element;c.className=c.className.replace("swipe-active",""),this.element.removeEventListener?(this.browser.touch&&(this.element.removeEventListener("touchstart",this,!1),this.element.removeEventListener("touchmove",this,!1),this.element.removeEventListener("touchend",this,!1)),this.browser.transitions&&(this.element.removeEventListener("webkitTransitionEnd",this,!1),this.element.removeEventListener("msTransitionEnd",this,!1),this.element.removeEventListener("oTransitionEnd",this,!1),this.element.removeEventListener("transitionend",this,!1)),window.removeEventListener("resize",this.resize,!1)):window.onresize=null},getPos:function(){return this.index},prev:function(a){this.delay=a||0,clearTimeout(this.interval),this.index?this.slide(this.index-1,this.speed):this.cont&&this.slide(this.length-1,this.speed)},next:function(a){this.delay=a||0,clearTimeout(this.interval),this.index<this.length-1?this.slide(this.index+1,this.speed):this.cont&&this.slide(0,this.speed)},begin:function(){var a=this;this.interval=this.delay?setTimeout(function(){a.next(a.delay)},this.delay):0},handleEvent:function(a){switch(a.type){case"touchstart":this.onTouchStart(a);break;case"touchmove":this.onTouchMove(a);break;case"touchend":this.onTouchEnd(a);break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"transitionend":this.onTransitionEnd(a);break;case"resize":this.setup()}},onTouchStart:function(a){var b=this;b.start={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,time:Number(new Date)},b.isScrolling=void 0,b.deltaX=0},onTouchMove:function(a){var b=this;a.touches.length>1||a.scale&&1!==a.scale||(b.deltaX=a.touches[0].pageX-b.start.pageX,"undefined"==typeof b.isScrolling&&(b.isScrolling=!!(b.isScrolling||Math.abs(b.deltaX)<Math.abs(a.touches[0].pageY-b.start.pageY))),b.isScrolling?b.disableScroll&&a.preventDefault():(a.preventDefault(),b.delay=0,clearTimeout(b.interval),b.deltaX=b.deltaX/(!b.index&&b.deltaX>0||b.index==b.length-1&&b.deltaX<0?Math.abs(b.deltaX)/b.width+1:1),b._slide([b.index-1,b.index,b.index+1],b.deltaX,0,-1)))},onTouchEnd:function(){var a=this,b=Number(new Date)-a.start.time<250&&Math.abs(a.deltaX)>20||Math.abs(a.deltaX)>a.width/2,c=!a.index&&a.deltaX>0||a.index==a.length-1&&a.deltaX<0,d=a.deltaX<0;a.isScrolling||(b&&!c?(d?(a._slide([a.index-1],-a.width,0,1),a._slide([a.index,a.index+1],-a.width,a.speed,0),a.index+=1):(a._slide([a.index+1],a.width,0,1),a._slide([a.index-1,a.index],a.width,a.speed,0),a.index+=-1),a.callback(a.index,a.slides[a.index])):a._slide([a.index-1,a.index,a.index+1],0,a.speed,0))},onTransitionEnd:function(a){this._getElemIndex(a.target)==this.index&&(this.delay&&this.begin(),this.transitionEnd(this.index,this.slides[this.index]))},slide:function(a){var b=this.index;if(b!=a){if(this.browser.transitions){for(var c=Math.abs(b-a)-1,d=Math.abs(b-a)/(b-a),e=[];c--;)e.push((a>b?a:b)-c-1);this._slide(e,this.width*d,0,1),this._slide([b,a],this.width*d,this.speed,0)}else this._animate(b*-this.width,a*-this.width,this.speed);this.index=a,this.callback(this.index,this.slides[this.index])}},_slide:function(a,b,c,d){for(var e=this.slides,f=a.length;f--;){var g=e[a[f]];if(g){var h=g.style,i=b+(1!=d?this.cache[a[f]]:0);h.webkitTransitionDuration=h.MozTransitionDuration=h.msTransitionDuration=h.OTransitionDuration=h.transitionDuration=(c?c:0)+"ms",h.webkitTransform="translate3d("+i+"px,0,0)",h.msTransform=h.MozTransform=h.OTransform="translateX("+i+"px)",1===d?this.cache[a[f]]=b:0===d&&(this.cache[a[f]]+=b)}}},_animate:function(a,b,c){var d=this.element;if(!c)return void(d.style.left=b+"px");var e=this,f=new Date,g=setInterval(function(){var h=new Date-f;return h>c?(d.style.left=b+"px",e._getElemIndex(d)==e.index&&(e.delay&&e.begin(),e.transitionEnd(e.index,e.slides[e.index])),void clearInterval(g)):void(d.style.left=(b-a)*(Math.floor(h/c*100)/100)+a+"px")},4)},_getElemIndex:function(a){return parseInt(a.getAttribute("data-index"),10)}},function(a,b){"use strict";Swipe.prototype.navBuild=function(a){var c,d=['<div class="slider-nav">',"<ol>"],e=b(a.container),f=e.find("li").length;for(c=0;f>c;c++)d.push("<li><button>"+(c+1)+"</button></li>");d.push("</ol>"),d.push('<button class="slider-prev">Previous</button>'),d.push('<button class="slider-next">Next</button>'),d.push("</div>"),e.after(d.join(""))},Swipe.prototype.navClick=function(a){var c=b(a.container);c.next(".slider-nav").on("click","button",function(){var c=b(this),d=c.attr("class")?c.attr("class").replace("disabled","").replace("slider-",""):!1;d&&!c.hasClass("disabled")&&a[d](),d||(a.slide(c.text()-1),Swipe.prototype.navUpdate(a))})},Swipe.prototype.navUpdate=function(a){var c=a.index,d=b(a.container),e=d.find("li").length,f=d.next(".slider-nav");f.find(".selected").removeClass("selected"),f.find("li").eq(c).addClass("selected"),f.find(".disabled").removeClass("disabled"),0===c&&f.find(".slider-prev").addClass("disabled"),c===e-1&&f.find(".slider-next").addClass("disabled")},a.init=function(c){a.isEnabled=!0,b.each(c,function(a){var d=new Swipe(c[a],{callback:function(){Swipe.prototype.navUpdate(d)},continuous:!1,speed:Modernizr.touch?200:500});b(d.container).find("li").show(),Swipe.prototype.navBuild(d),Swipe.prototype.navClick(d),Swipe.prototype.navUpdate(d)})},b(function(){a.init(b(".slider"))})}(window.frwd.slider=window.frwd.slider||{},jQuery);